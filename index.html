<!DOCTYPE html>
<html>
<head>
  <title>مکان‌یابی</title>
  <script>
    function sendLocation(position) {
      fetch("https://script.google.com/macros/s/AKfycbzds7uj0cA6EUBpyXpsvu399RxInqIuV0GG9enarElR771bs-4Oy7PFaYsxrpqYkKPpRg/exec", {
        method: "POST",
        body: JSON.stringify({
          latitude: position.coords.latitude,
          longitude: position.coords.longitude
        }),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(response => response.text())
      .then(data => alert("موقعیت ثبت شد: " + data))
      .catch(error => alert("خطا در ارسال موقعیت: " + error));
    }

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendLocation, () => {
          alert("دسترسی مکان رد شد.");
        });
      } else {
        alert("مرورگر شما مکان‌یابی را پشتیبانی نمی‌کند.");
      }
    }
  </script>
</head>
<body onload="getLocation()">
  <h2>در حال مکان‌یابی...</h2>
</body>
</html>
